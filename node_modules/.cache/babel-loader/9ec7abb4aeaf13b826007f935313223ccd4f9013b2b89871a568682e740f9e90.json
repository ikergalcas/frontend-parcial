{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ikerg\\\\Desktop\\\\IngWeb\\\\Parcial3\\\\frontend\\\\src\\\\login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CompLogin = () => {\n  _s();\n  const navigate = useNavigate();\n  const volverAtras = e => {\n    e.preventDefault();\n    navigate(-1);\n  };\n  useEffect(() => {\n    /* global google */\n    google.accounts.id.initialize({\n      client_id: \"249081549551-2m7g5cc6fo0vigcp6tk7u76gn43gpqab.apps.googleusercontent.com\",\n      callback: handleCallBackResponse\n    });\n\n    /* global google */\n    google.accounts.id.renderButton(document.getElementById(\"singInDiv\"), {\n      'scope': 'profile email',\n      'width': 300,\n      'height': 70,\n      'longtitle': true,\n      'theme': 'dark'\n    });\n  }, []);\n  function handleCallBackResponse(response) {\n    console.log(\"Encode JWT: \" + response.credential);\n    fetch(`https://backend-parcial-ikergalcas-projects.vercel.app/entidades/loginToken/${response.credential}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => {\n      // Actualizar el estado con los productos obtenidos\n      if (data) {\n        data.tokenCompleto = response.credential;\n        localStorage.setItem('objetoToken', JSON.stringify(data));\n        window.location.href = \"/entidades\";\n        //console.log(JSON.parse(localStorage.getItem('objetoToken')))\n      }\n    }).catch(error => {\n      console.error('Error al obtener productos:', error);\n    });\n  }\n  function handleSingOut(e) {\n    google.accounts.id.signOut().then(function () {\n      console.log('User signed out.');\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"singInDiv\",\n    style: {\n      height\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n_s(CompLogin, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = CompLogin;\nexport default CompLogin;\nvar _c;\n$RefreshReg$(_c, \"CompLogin\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useParams","jsxDEV","_jsxDEV","CompLogin","_s","navigate","volverAtras","e","preventDefault","google","accounts","id","initialize","client_id","callback","handleCallBackResponse","renderButton","document","getElementById","response","console","log","credential","fetch","method","headers","then","res","json","data","tokenCompleto","localStorage","setItem","JSON","stringify","window","location","href","catch","error","handleSingOut","signOut","style","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ikerg/Desktop/IngWeb/Parcial3/frontend/src/login/Login.js"],"sourcesContent":["import {useState, useEffect} from 'react'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\n\r\nconst CompLogin = () => {\r\n    const navigate = useNavigate()\r\n\r\n    const volverAtras = (e) => {\r\n        e.preventDefault()\r\n        navigate(-1)\r\n    }\r\n\r\n    useEffect (() => {\r\n        /* global google */\r\n        google.accounts.id.initialize({\r\n            client_id: \"249081549551-2m7g5cc6fo0vigcp6tk7u76gn43gpqab.apps.googleusercontent.com\",\r\n            callback: handleCallBackResponse\r\n        });\r\n\r\n        /* global google */\r\n        google.accounts.id.renderButton(\r\n            document.getElementById(\"singInDiv\"), {\r\n                'scope': 'profile email',\r\n                'width': 300,\r\n                'height': 70,\r\n                'longtitle': true,\r\n                'theme': 'dark' \r\n            }\r\n\r\n        );\r\n        \r\n    }, []);\r\n\r\n    function handleCallBackResponse (response){\r\n        console.log(\"Encode JWT: \"+  response.credential)\r\n        fetch(`https://backend-parcial-ikergalcas-projects.vercel.app/entidades/loginToken/${response.credential}`, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        }).then(res => res.json())\r\n          .then(data => {\r\n                // Actualizar el estado con los productos obtenidos\r\n                if (data){\r\n                    data.tokenCompleto= response.credential\r\n                    localStorage.setItem('objetoToken', JSON.stringify(data));\r\n                    window.location.href=\"/entidades\"\r\n                    //console.log(JSON.parse(localStorage.getItem('objetoToken')))\r\n                }\r\n                        \r\n            })\r\n            .catch(error => {\r\n                console.error('Error al obtener productos:', error);\r\n            });\r\n    }\r\n\r\n    function handleSingOut (e) {\r\n        google.accounts.id.signOut().then(function () {\r\n            console.log('User signed out.');\r\n            });\r\n    }\r\n\r\n\r\n    return (  \r\n        <div id='singInDiv' style={{height}}></div>\r\n    )\r\n}\r\n\r\nexport default CompLogin "],"mappings":";;AAAA,SAAQA,QAAQ,EAAEC,SAAS,QAAO,OAAO;AACzC,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEzD,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,WAAW,GAAIC,CAAC,IAAK;IACvBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBH,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC;EAEDP,SAAS,CAAE,MAAM;IACb;IACAW,MAAM,CAACC,QAAQ,CAACC,EAAE,CAACC,UAAU,CAAC;MAC1BC,SAAS,EAAE,0EAA0E;MACrFC,QAAQ,EAAEC;IACd,CAAC,CAAC;;IAEF;IACAN,MAAM,CAACC,QAAQ,CAACC,EAAE,CAACK,YAAY,CAC3BC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC,EAAE;MAClC,OAAO,EAAE,eAAe;MACxB,OAAO,EAAE,GAAG;MACZ,QAAQ,EAAE,EAAE;MACZ,WAAW,EAAE,IAAI;MACjB,OAAO,EAAE;IACb,CAEJ,CAAC;EAEL,CAAC,EAAE,EAAE,CAAC;EAEN,SAASH,sBAAsBA,CAAEI,QAAQ,EAAC;IACtCC,OAAO,CAACC,GAAG,CAAC,cAAc,GAAGF,QAAQ,CAACG,UAAU,CAAC;IACjDC,KAAK,CAAE,+EAA8EJ,QAAQ,CAACG,UAAW,EAAC,EAAE;MACxGE,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAI;MACR;MACA,IAAIA,IAAI,EAAC;QACLA,IAAI,CAACC,aAAa,GAAEX,QAAQ,CAACG,UAAU;QACvCS,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;QACzDM,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAC,YAAY;QACjC;MACJ;IAEJ,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;MACZnB,OAAO,CAACmB,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACvD,CAAC,CAAC;EACV;EAEA,SAASC,aAAaA,CAAEjC,CAAC,EAAE;IACvBE,MAAM,CAACC,QAAQ,CAACC,EAAE,CAAC8B,OAAO,CAAC,CAAC,CAACf,IAAI,CAAC,YAAY;MAC1CN,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC/B,CAAC,CAAC;EACV;EAGA,oBACInB,OAAA;IAAKS,EAAE,EAAC,WAAW;IAAC+B,KAAK,EAAE;MAACC;IAAM;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AAEnD,CAAC;AAAA3C,EAAA,CA9DKD,SAAS;EAAA,QACMJ,WAAW;AAAA;AAAAiD,EAAA,GAD1B7C,SAAS;AAgEf,eAAeA,SAAS;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}